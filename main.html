<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AveiroSmartPark</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <header class="hero">
    <nav class="navbar">
      <div class="logo">
      <span class="icon">üÖøÔ∏è</span> <span class="logo-text">AveiroSmartPark</span>
      </div>
      <ul class="nav-links">
      <li><a href="main.html">Home</a></li>
      <li><a href="reservas.html">Reservas</a></li>
      <li><a href="index.html" class="user-info">Manuel Goucha <img src="user.png" alt="√çcone de Utilizador" class="user-icon"></a></li>
      </ul>
    </nav>
    <div class="content">
      <div class="text">
        <p class="welcome">Bem-vindo!</p>
        <h1 class="title">AveiroSmartPark</h1>
        <p class="subtitle">Estacione com intelig√™ncia, explore com tranquilidade.<br>
        Aproveite cada momento sem preocupa√ß√µes.</p>
      </div>
      
      <div class="form-container">
        <p class="call-to-action">Reserve Agora!</p>
        <form class="reservation-form">
          <div class="form-group">
            <label for="local">Localiza√ß√£o</label>
            <select id="local">

            </select>
          </div>
          <div class="form-group">
            <label for="checkin">CHECK IN</label>
            <input type="date" id="checkin" value="2025-04-20">
          </div>
          <div class="form-group">
            <label for="horaentrada">Hora de Entrada</label>
            <select id="horaentrada">
              <option>06:00</option>
              <option>07:00</option>
              <option>08:00</option>
              <option>09:00</option>
              <option>10:00</option>
              <option>11:00</option>
              <option>12:00</option>
              <option>13:00</option>
              <option>14:00</option>
              <option>15:00</option>
              <option>16:00</option>
              <option>17:00</option>
              <option>18:00</option>
              <option>19:00</option>
              <option>20:00</option>
              <option>21:00</option>
              <option>22:00</option>
              <option>23:00</option>
              
            </select>
          </div>
          <div class="form-group">
            <label for="checkout">CHECK OUT</label>
            <select id="checkout">
              <option>06:00</option>
              <option>07:00</option>
              <option>08:00</option>
              <option>09:00</option>
              <option>10:00</option>
              <option>11:00</option>
              <option>12:00</option>
              <option>13:00</option>
              <option>14:00</option>
              <option>15:00</option>
              <option>16:00</option>
              <option>17:00</option>
              <option>18:00</option>
              <option>19:00</option>
              <option>20:00</option>
              <option>21:00</option>
              <option>22:00</option>
              <option>23:00</option>
              
            </select>
          </div>
          <button type="submit" class="reserve-btn">Reserve</button>
        </form>
      </div>
    </div>
  </header>

  <section class="benefits">
    <div class="benefits-top">
      <span>Mobilidade Conveni√™ncia Conforto Tempo Rapidez</span>
    </div>

    <div class="benefits-content">
      <div class="benefit-item">
        <img src="flexibilidade.png" alt="√çcone de Flexibilidade" />
        <h3>Desfrute de flexibilidade</h3>
        <p>Ajuste os detalhes conforme necess√°rio. A sua viagem, moldada pelas suas prefer√™ncias</p>
      </div>
      <div class="benefit-item">
        <img src="tempo.png" alt="√çcone de Tempo" />
        <h3>Chegue sempre a tempo</h3>
        <p>Informa√ß√£o em tempo real para uma reserva sem surpresas.</p>
      </div>
      <div class="benefit-item">
        <img src="mao.png" alt="√çcone de M√£o" />
        <h3>Na palma da sua m√£o</h3>
        <p>Acesso instant√¢neo e simplificado para uma experi√™ncia sem preocupa√ß√µes.</p>
      </div>
    </div>

    <div class="benefits-bottom">
      <span>üöó</span>
      <strong>OS NOSSOS PARQUES</strong>
      <span>üöó</span>
    </div>
  </section>

  <section class="map-section">
    <h2>Mapa de Estacionamento em Aveiro</h2>
    <div id="map"></div>
  </section>

  <!-- JS Leaflet -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  
  <section class="report-problem">
    <div class="report-container">
      <div class="report-text">
        <h2 class="report-title">AveiroSmartPark</h2>
        <p>Reportar um problema:</p>
        <div class="report-form">
          <input type="text" placeholder="Escreva aqui..." />
          <button type="submit" class="send-button">‚û§</button>
        </div>
      </div>
      <div class="report-icon">
        <img src="carro-amarelo.png" alt="√çcone de carro" />
      </div>
    </div>
  </section>
  
  <script src="animation.js"></script>

<script>
  // Quando o utilizador  clicar no bot√£o "Reserve", mostrar o pop-up de pagamento
  document.querySelector('.reserve-btn').addEventListener('click', function(e) {
    e.preventDefault(); // Impedir o envio do formul√°rio
    
    // Obter os valores do formul√°rio
    const local = document.getElementById('local').value;
    const dataInput = document.getElementById('checkin').value;
    const horaEntrada = document.getElementById('horaentrada').value;
    const horaSaida = document.getElementById('checkout').value;
    
    // Formatar a data para o formato DD/MM/YYYY
    const dataObj = new Date(dataInput);
    const dia = String(dataObj.getDate()).padStart(2, '0');
    const mes = String(dataObj.getMonth() + 1).padStart(2, '0');
    const ano = dataObj.getFullYear();
    const dataFormatada = `${dia}/${mes}/${ano}`;
    
    // Calcular o pre√ßo com base no tempo de estacionamento
    let preco = calcularPreco(horaEntrada, horaSaida, local);
    
    // Chamar a fun√ß√£o de pop-up de pagamento com os par√¢metros din√¢micos
    showPaymentPopup(local, dataFormatada, horaEntrada, horaSaida, preco);
  });
  
  // Fun√ß√£o para calcular o pre√ßo com base no tempo e local
  function calcularPreco(horaEntrada, horaSaida, local) {
    // Converter horas para n√∫meros
    const inicio = parseInt(horaEntrada.split(':')[0]);
    const fim = parseInt(horaSaida.split(':')[0]);
    
    // Calcular a dura√ß√£o em horas
    let horas = fim - inicio;
    if (horas < 0) horas += 24; // Caso o hor√°rio de sa√≠da seja no dia seguinte
    
    // Pre√ßo base por hora dependendo do local
    let precoPorHora = 1.00;
    if (local.includes("Campus")) {
      precoPorHora = 0.75; // Pre√ßo mais baixo para o campus
    } else if (local.includes("Esta√ß√£o")) {
      precoPorHora = 1.25; // Pre√ßo mais alto perto da esta√ß√£o
    }
    
    // Calcular pre√ßo total (arredondado para 2 casas decimais)
    let precoTotal = (horas * precoPorHora).toFixed(2);
    
    return precoTotal;
  }
</script>

</body>
</html>
